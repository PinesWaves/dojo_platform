{% extends 'dashboard/student/base-st.html' %}
{% block title %}Seishin Dojo JKA | {{ kata.name }}{% endblock %}
{% block dashboard_content %}

<div class="content-header">
  <div class="container">
    <div class="row mb-2">
      <div class="col-sm-6">
        <h1 class="m-0">{{ kata.name }}</h1>
      </div>
      <div class="col-sm-6">
        <ol class="breadcrumb float-sm-right">
          <li class="breadcrumb-item"><a href="{% url 'student_dashboard' %}">Dashboard</a></li>
          <li class="breadcrumb-item"><a href="{% url 'library' %}">Library</a></li>
          <li class="breadcrumb-item active">{{ kata.name }}</li>
        </ol>
      </div>
    </div>
  </div>
</div>

<div class="content">
  <div class="container">
    <div class="card card-outline card-success">
      <div class="card-body">
        <p><strong>Nivel:</strong> {{ kata.get_level_display }}</p>
        <p>{{ kata.description }}</p>

        {% if kata.embusen_diagram %}
          <h5>📐 Embusen</h5>
          <img src="{{ kata.embusen_diagram.url }}" class="img-fluid mb-3" alt="Embusen de la kata">
        {% endif %}

        {% if kata.video_reference %}
          <h5>🎥 Video de referencia</h5>
          <div class="embed-responsive embed-responsive-16by9 mb-3">
            <iframe class="embed-responsive-item" src="{{ kata.video_reference }}" allowfullscreen></iframe>
          </div>
        {% endif %}
      </div>
    </div>

    <h4 class="mt-4">📘 Lecciones disponibles</h4>
    <ul class="list-group">
      {% for lesson in kata.lessons.all %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ lesson.title }}
        <a href="{% url 'kata_lesson_detail' lesson.id %}" class="btn btn-sm btn-primary">Ver lección</a>
      </li>
      {% empty %}
      <li class="list-group-item text-muted">No hay lecciones registradas para esta kata.</li>
      {% endfor %}
    </ul>
  </div>
</div>

{% endblock %}
